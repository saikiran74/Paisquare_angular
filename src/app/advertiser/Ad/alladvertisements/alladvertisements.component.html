@if (showSearchBox) {
    <div class="flex justify-content-center w-full px-2 pt-2 pb-2">

        <form (ngSubmit)="onSearchSubmit()" class="w-full">
        <div class="flex align-items-center gap-2  
        border-radius py-2 search-bar-container" [ngClass]="{ 'focused': isFocused }">
            <!-- Search Icon -->
            <i class="pi pi-search text-gray-400" style="font-size: 1.5rem;"></i>
            <!-- Input Field -->
            <input pInputText type="text" [(ngModel)]="query" name="query"
            (focus)="isFocused = true" (blur)="isFocused = false"
            placeholder=" Search ads by content, heading, or description..."
            class="flex-1 text-base font-normal text-gray-700 border-none outline-none bg-transparent placeholder:text-gray-500"
            style="min-width: 0; font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;" />
    
            <!-- Gradient Button -->
            <button 
                type="submit" class="text-white font-semibold"
                style=" padding: 5px 20px; font-size: 1rem;  cursor:pointer;
                border-radius: 12px;  background: linear-gradient(to right, #3b82f6, #8b5cf6);
                border: none; font-family: 'Inter', 'Segoe UI', system-ui, sans-serif; ">
                Search
                
        </button>
        </div>
        </form>
    </div>
}
  
    
  
@if(showFilterBox){
    <div class="grid">

        <div class="col-12 sm:col-6">
            
            <!-- Category -->
            <div class="flex flex-column p-1 px-3 gap-1">
                <label class="block text-sm font-medium text-color-secondary ">Category</label>
                <div class="p-input-icon-left relative w-full flex gap-2" [class.focused]="isFocusedCategory">
                    <i class="pi pi-search input-icon"></i>
                    <input pInputText [(ngModel)]="categorySearch" placeholder="Search categories..."
                        class="flex-1"
                        (focus)="isFocusedCategory = true" (blur)="isFocusedCategory = false"
                        style="padding-left: 2rem; min-width: 0;"/>
                </div>
                <!--
                <div *ngIf="categorySearch" class="flex flex-wrap gap-2 mt-2 max-h-20 overflow-y-auto">
                    <button
                        *ngFor="let cat of filteredCategories" pButton [label]="cat" size="small"
                        [ngClass]="selectedCategory === cat ? 'btn-primary' : 'btn-secondary'" 
                        (click)="selectCategory(cat)"
                    ></button>
                </div>
                -->
                
            </div>
        </div>
        <div class="col-12 sm:col-6">
            <!-- Location -->
            <div class="flex flex-column p-1 px-3 gap-1">
                <label class="block text-sm font-medium text-color-secondary ">Location</label>
                <div class="p-input-icon-left relative w-full flex gap-2" [class.focused]="isFocusedLocation">
                    <i class="pi pi-map input-icon"></i>
                    <input pInputText [(ngModel)]="location" placeholder="City, state" class="styled-input"
                        (focus)="isFocusedLocation = true" class="flex-1"
                        (blur)="isFocusedLocation = false" 
                        style="padding-left: 2rem; min-width: 0;"/>
                </div>
            </div>
        </div>
        
        <div class="col-12 md:col-6">
            <!-- Pincode -->
            <div class="flex flex-column p-1 px-3 gap-1">
                <label class="block text-sm font-medium text-color-secondary ">Pincodes</label>
                <div class="p-input-icon-left relative w-full flex gap-2 " [class.focused]="isFocusedLocation">
                    <i class="pi pi-map-marker input-icon"></i>
                    <input pInputText [(ngModel)]="newPincode" 
                        (input)="sanitizePincode()"
                        (keyup.enter)="addPincode()" 
                        placeholder="6-digit" maxlength="6" class="flex-1"
                        style="padding-left: 2rem; min-width: 0;" />
                    <button pButton icon="pi pi-plus" size="small" severity="primary"
                        (click)="addPincode()" 
                        [disabled]="newPincode.length !== 6" 
                    ></button>
                </div>
                <div class="flex flex-row flex-wrap gap-1">
                    <p-chip
                        *ngFor="let pin of pincodes" [label]="pin"
                        [removable]="true" (remove)="removePincode(pin)"
                    ></p-chip>
                </div>
                
            </div>
        </div>
        <div class="col-12 md:col-6">
            <!-- Hashtag (your current block) -->
            <div class="flex flex-column p-1 px-3 gap-1">
                <label class="block text-sm font-medium text-color-secondary ">Hashtags</label>
                <!-- Wrap input in a relative container -->
                <div class="p-input-icon-left w-full relative flex gap-2 ">
                    <i class="pi pi-hashtag hashtag-icon"></i>
                    <input pInputText [(ngModel)]="newHashtag" (input)="sanitizeHashtag()" (keydown.enter)="addHashtag()"
                        placeholder="hashtag" class="flex-1 hashtag-input" 
                        (focus)="isFocusedHashtag = true" (blur)="isFocusedHashtag = false"
                        (keyup.enter)="addHashtag()" 
                        style="padding-left: 2rem; min-width: 0;"/>
                    <button pButton icon="pi pi-plus" size="small" severity="primary"
                        (click)="addHashtag()"
                        [disabled]="!newHashtag.trim()"
                    ></button>
                </div>
                <div class="flex flex-row flex-wrap gap-1">
                    <p-chip
                        *ngFor="let hashtag of hashtags" [label]="hashtag"
                        [removable]="true" (remove)="removeHashtag(hashtag)"
                    ></p-chip>
                </div>
            </div>
        </div>
        <div class="col-12 pt-4 pb-2">
        <!-- Filter Action Buttons -->
            <div class="flex flex-row  px-3 
                align-items-center justify-content-end gap-1"
                style="border-color: #f2f3f6;">
                <!-- Reset -->
                <button
                    pButton label="Reset" class=" sm:w-auto px-4"
                    size="small"  (click)="clearAllFilters()"
                    style="
                            background-color: white;
                            color: #374151;
                            border: 1px solid #d1d5db;
                            border-radius: 6px;
                            font-weight: 500;
                            transition: background-color 0.2s ease;
                        ">
                </button>
                <!-- Apply Filters Button -->
                <button
                    pButton label="Apply Filters"
                    class=" sm:w-auto px-4 text-white apply-btn-blue" size="small"
                    [ngStyle]="{backgroundColor: '#3b82f6',
                    border: 'none', cursor: 'pointer', borderRadius: '6px',
                    fontWeight: '500'  }"
                    
                    (click)="handleSubmitFilters()"
                ></button>
    
            </div>
        </div>
        
    </div>
}

<br>
  
  
  
  
  
  
  
  
  
  
  
  
  <!--
  <div class="grid" style="background-color: rgba(239, 242, 245, 0.877); padding: 8px;">
      <div class="flex col-12">
          <div style="display: flex; flex-wrap: wrap;  " class="gap-2 justify-content-start align-items-center">
              <ng-container *ngFor="let chip of chips | slice:0:5; let i = index">
                  <p-chip
                    *ngIf="chip.label && chip.label.trim().length > 0"
                    [label]="chip.label"
                    [styleClass]="activeChipIndex === i ? 'active-chip' : 'inactive-chip'"
                    (click)="onChipClick(i)">
                  </p-chip>
              </ng-container>
          </div>
          <div class="flex justify-content-end align-items-center" style="flex-grow: 1; text-align: right;">
              @if(!isMobileView){
                  <span class="p-input-icon-left">
                      <i class="pi pi-search"></i>
                      
                      <p-inputMask mask="999999" class="form-control"
                       [style]="{'height': '35px','padding-left':'30px'}"
                      formControlName="pincode" placeholder="Filter by pincodes" (keydown.enter)="onSearch($event)" /><br>
                  </span>
              } @else {
                  <span class="search-icon" *ngIf="isMobileView">
                      <i class="pi pi-search" style="font-size: 1.5rem;" (click)="toggleSearchBox()"></i>
                  </span>
              }
          </div>
      </div>
          @if (showSearchBox) {
              <div class="grid">
                  <div class="col-12">
                      <span class="search-box">
                          <input 
                              pInputText style="margin-left: 18px;"
                              placeholder="Filter by pincodes"
                              (keydown.enter)="onSearch($event)" 
                          />
                      </span>
                  </div>
              </div>
          }
  </div>
  -->

  <div class="container" >
      @if (querySearch || filterSearch) {
          @if (advertisements.length > 0) {
              <app-homepage
              *ngFor="let ad of advertisements"
              [ad]="ad"
          ></app-homepage>
          } @else {
              <p style="padding-left: 16px;">No advertisements found for your query.</p>
          }
  
      } @else {
          <app-homepage *ngFor="let ads of advertisements" [ad]="ads" (fetchData)="fetchadvertisement()"></app-homepage>
      }
  </div>